{% load static %}

<!-- Desktop Sidebar -->
<aside class="hidden xl:flex fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg rounded-r-2xl flex-col">
  <!-- Logo / Home -->
  <div class="flex items-center justify-between px-6 py-4 border-b">
    <a href="" class="flex items-center gap-2">
      <img src="{% static 'assets/img/logo-ct.png' %}" alt="Logo" class="h-8 w-auto" />
      <span class="font-semibold text-gray-800">Home</span>
    </a>
  </div>

  <!-- Navigation -->
  <nav class="flex-1 overflow-y-auto px-4 py-6">
    <ul class="space-y-2">
      <!-- Dashboard -->
      <li>
        <a href="" hx-boost="true"
           class="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-700 font-medium hover:bg-blue-50 hover:text-blue-700 transition">
          <div class="flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-tr from-purple-600 to-pink-500 text-white">
            ğŸ“Š
          </div>
          Dashboard
        </a>
      </li>

      <!-- Approvals -->
      <li class="pt-4">
        <h6 class="px-3 text-xs font-bold uppercase text-gray-400">Approvals</h6>
      </li>
      <li>
        <a href="{% url 'create-approval' %}" hx-boost="true"
           class="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-600 hover:bg-blue-50 hover:text-blue-700 transition">
          <div class="flex h-8 w-8 items-center justify-center rounded-lg bg-gray-100 text-gray-700">â•</div>
          Create Approval
        </a>
      </li>
      <li>
        <a href="{% url 'my-created-approvals' %}" hx-boost="true"
           class="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-600 hover:bg-blue-50 hover:text-blue-700 transition">
          <div class="flex h-8 w-8 items-center justify-center rounded-lg bg-gray-100 text-gray-700">ğŸ“„</div>
          View Approvals
        </a>
      </li>

      <!-- Leave Management -->
      <li class="pt-4">
        <h6 class="px-3 text-xs font-bold uppercase text-gray-400">Leave Management</h6>
      </li>
      <li>
        <a href="{% url 'leave-balances' %}" hx-boost="true"
           class="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-600 hover:bg-blue-50 hover:text-blue-700 transition">
          <div class="flex h-8 w-8 items-center justify-center rounded-lg bg-gray-100 text-gray-700">ğŸŒ´</div>
          My Leaves
        </a>
      </li>
      <li>
        <a href="{% url 'pending-leaves' %}" hx-boost="true"
           class="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-600 hover:bg-blue-50 hover:text-blue-700 transition">
          <div class="flex h-8 w-8 items-center justify-center rounded-lg bg-gray-100 text-gray-700">â³</div>
          Pending Leaves
        </a>
      </li>

      <!-- Attendance -->
      <li class="pt-4">
        <h6 class="px-3 text-xs font-bold uppercase text-gray-400">Check In/Out</h6>
      </li>
      <li>
        <a href="{% url 'attendance-dashboard' %}" hx-boost="true"
           class="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-600 hover:bg-blue-50 hover:text-blue-700 transition">
          <div class="flex h-8 w-8 items-center justify-center rounded-lg bg-gray-100 text-gray-700">ğŸ“Š</div>
          Dashboard
        </a>
      </li>
      <li>
        <a href="{% url 'attendance-list' %}" hx-boost="true"
           class="flex items-center gap-3 px-3 py-2 rounded-lg text-gray-600 hover:bg-blue-50 hover:text-blue-700 transition">
          <div class="flex h-8 w-8 items-center justify-center rounded-lg bg-gray-100 text-gray-700">ğŸ“‹</div>
          Records
        </a>
      </li>
    </ul>
  </nav>
</aside>

<!-- Mobile Bottom Menu -->
<nav class="xl:hidden fixed bottom-0 left-0 right-0 z-50 bg-white border-t shadow-lg">
  <ul class="flex justify-around items-center py-2">
    <li>
      <a href="" hx-boost="true" class="flex flex-col items-center text-gray-600 hover:text-blue-600">
        ğŸ“Š
        <span class="text-xs">Dashboard</span>
      </a>
    </li>
    <li>
      <a href="{% url 'create-approval' %}" hx-boost="true" class="flex flex-col items-center text-gray-600 hover:text-blue-600">
        â•
        <span class="text-xs">Approval</span>
      </a>
    </li>
    <li>
      <a href="{% url 'leave-balances' %}" hx-boost="true" class="flex flex-col items-center text-gray-600 hover:text-blue-600">
        ğŸŒ´
        <span class="text-xs">Leaves</span>
      </a>
    </li>
    <li>
      <a href="{% url 'attendance-list' %}" hx-boost="true" class="flex flex-col items-center text-gray-600 hover:text-blue-600">
        ğŸ“‹
        <span class="text-xs">Records</span>
      </a>
    </li>
  </ul>
</nav>

<script>
  // Show spinner on HTMX request start
  document.body.addEventListener('htmx:configRequest', (evt) => {
    const link = evt.target.closest('a[hx-boost]');
    if(link) {
      const spinner = link.querySelector('svg.animate-spin');
      if(spinner) spinner.classList.remove('hidden');
    }
  });

  // Hide spinner after request swap or completion
  document.body.addEventListener('htmx:afterSwap', (evt) => {
    const link = evt.target.closest('a[hx-boost]');
    if(link) {
      const spinner = link.querySelector('svg.animate-spin');
      if(spinner) spinner.classList.add('hidden');
    }
  });

  document.body.addEventListener('htmx:afterRequest', (evt) => {
    const link = evt.target.closest('a[hx-boost]');
    if(link) {
      const spinner = link.querySelector('svg.animate-spin');
      if(spinner) spinner.classList.add('hidden');
    }
  });
</script>
